apiVersion: apps/v1
kind: Deployment
metadata:
  name: bd-ulm-app-deployment
  namespace: bd-ulm
spec:
  selector:
    matchLabels:
      app: bd-ulm-app
  replicas: 1
  template:
    metadata:
      labels:
        app: bd-ulm-app
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 10000
        runAsGroup: 10000
      containers:
        - name: bd-ulm-app-container
          image: #{IMAGE_REGISTRY}#/ulm-app:#{IMAGE_TAG}#
          #image: #{IMAGE_REGISTRY}#/bdcsp-app:#{IMAGE_TAG}#
          #args: [ "-Djavax.net.debug=ssl:handshake" ]
          #command: ["/bin/bash"]
          #args: ["-c", "while true; do ping localhost:5000; sleep 60;done"]
          ports:
            - name: webapp-port
              containerPort: 80
              protocol: TCP
          env:
            #- name: ASPNETCORE_URLS
            #  value: http://+:5000
            #- name: SPRING_PROFILE_ACTIVE
            #  value: dev
            - name: env
              value: "#{ENV}#"